@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewData["Title"] = "Blogs";
    var blogs = (List<Foodzfame.Data.Entities.Blog>)ViewBag.Blogs;
    int totalPages = blogs.Count / 6;
    if (blogs.Count % 6 != 0)
        totalPages++;
    string specialKey = Convert.ToString(ViewBag.search);
}
<input type="hidden" id="hdnTotalCount" value="@blogs.Count" />
<input type="hidden" id="hdnTotalPages" value="@totalPages" />
<div class="row defaultHeader">
    <div class="overlay">
        <div class="container">
            <div class="recipeTitle">
                Our Food blog
            </div>
        </div>
    </div>
</div>
<div class="marTop2pr"></div>
<div class="row">
    <div class="container">
        <div class="row">
            <nav class="pad-left-15 pad-right-15" aria-label="Page navigation">
                <ul class="pagination">
                    <li class="page-item"><a class="page-link" onclick="paginate(this,6)">Previous</a></li>
                    @for (int i = 1; i <= totalPages; i++)
                    {
                        if (i == 1)
                        {
                            <li class="page-item"><a class="page-link active" onclick="paginate(this,6)">@i</a></li>

                        }
                        else if (i > 3)
                        {
                            <li class="page-item"><a  style="display:none;"  class="page-link" onclick="paginate(this,6)">@i</a></li>

                        }
                        else
                        {
                            <li class="page-item"><a class="page-link" onclick="paginate(this,6)">@i</a></li>

                        }
                    }
                    <li class="page-item"><a class="page-link" onclick="paginate(this,6)">Next</a></li>
                </ul>
            </nav>
            <form style="position: absolute; right: 4%;">
                @if (specialKey == "_")
                {
                    <input type="text" id="blogSearch" style=" margin-right: -2%; line-height: 2;" placeholder="Search.." name="search">

                }
                else
                {
                    <input type="text" id="blogSearch" value="@specialKey" style=" margin-right: -2%; line-height: 2;" placeholder="Search.." name="search">

                }
                <button type="submit" asp-controller="Blog" asp-action="Index" asp-route-search="$('#blogSearch').val()" style=" margin-top: -2%; margin-left: -1%;" class="btn btn-success"><i class="fa fa-search"></i></button>
            </form>
        </div>

        <div class="row">
            @for (int i = 1; i <= blogs.Count; i++)
            {
                    var base64 = Convert.ToBase64String(blogs[i - 1].Img);
                    var imgSrc = String.Format("data:image/gif;base64,{0}", base64);
                    if (blogs[i - 1].Benefits != null && blogs[i - 1].Benefits.Length > 20)
                        blogs[i - 1].Benefits = blogs[i - 1].Benefits.Substring(0, 19);
               
                if (i > 6)
                {
                    <div style="display:none" id="page_@i" class="col-sm-4 marBottom3pr">
                        <div class="border-radius">

                            <a asp-action="Post" asp-route-id="@blogs[i - 1].Id"><img src="@imgSrc" class="zoom" /></a>
                            <div class="dishTitle">@blogs[i - 1].Title</div>
                            <div class="dishDesc">@blogs[i - 1].Benefits</div>
                            <div class="author">by Nupoor's Kitchen</div>
                        </div>
                    </div>
                }
                else
                {
                    <div id="page_@i" class="col-sm-4 marBottom3pr">
                        <div class="border-radius">
                            <a asp-action="Post" asp-route-id="@blogs[i - 1].Id"><img src="@imgSrc" class="zoom" /></a>
                            <div class="dishTitle">@blogs[i - 1].Title</div>
                            <div class="dishDesc">@blogs[i - 1].Benefits</div>
                            <div class="author">by Nupoor's Kitchen</div>
                        </div>
                    </div>
                }
            }
        </div>
    </div>
</div>
<div class="marTop2pr"></div>
<partial name="_MostPopularPartial" />
<div class="marTop2pr"></div>
<partial name="_SubscribePartial" />
